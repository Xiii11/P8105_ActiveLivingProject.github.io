<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data Source</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.33/datatables.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<script src="site_libs/jszip-1.13.6/jszip.min.js"></script>
<script src="site_libs/pdfmake-1.13.6/pdfmake.js"></script>
<script src="site_libs/pdfmake-1.13.6/vfs_fonts.js"></script>
<link href="site_libs/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="site_libs/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script>
<script src="site_libs/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script>
<link href="site_libs/dt-plugin-searchhighlight-1.13.6/source.css" rel="stylesheet" />
<script src="site_libs/dt-plugin-searchhighlight-1.13.6/jquery.highlight.js"></script>
<script src="site_libs/dt-plugin-searchhighlight-1.13.6/source.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="datasource.html">Data Source</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    EDA
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="eda.html">Neighborhood Level</a>
    </li>
    <li>
      <a href="eda2.html">Borough Level</a>
    </li>
  </ul>
</li>
<li>
  <a href="model.html">Model Analysis</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="report.html">Final Report</a>
</li>
<li>
  <a href="about.html">The Team</a>
</li>
<li>
  <a href="mailto:&lt;ys3766@cumc.columbia.edu&gt;,&lt;qc2337@cumc.columbia.edu&gt;,&lt;aw3621@cumc.columbia.edu&gt;,&lt;xp2213@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/Xiii11/P8105_ActiveLivingProject.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data Source</h1>

</div>


<div id="background" class="section level2">
<h2><strong>Background</strong></h2>
<p>We utilized <a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/walking-driving-and-cycling/?id=2415#display=summary">Walking,
driving, and cycling</a> and <a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/overweight/?id=2061#display=summary">Overweight</a>
from The Official Website of the City of New York.</p>
<p>The <a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/walking-driving-and-cycling/?id=2415#display=summary">Walking,
driving, and cycling</a> dataset covers various commuting modes used by
<code>adults</code>, focusing on public transit, biking, walking, and
driving using private vehicles. This information provides insights into
transportation availability and choices.The dataset provides aggregated
data for overlapping four-year intervals, starting from 2007 and
extending to 2021. Each interval represents a rolling four-year period.
We use the latest 2017-2021 dataset to do data analysis.</p>
<p>The <a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/overweight/?id=2061#display=summary">Overweight</a>
provides insights into the prevalence of
<code>overweight or obesity</code> among adults across New York City.
The data spans from 2003 to 2022, with yearly updates available. It
offers granular breakdowns by geographical boundaries including
citywide, borough, and UHF34 regions. The dataset includes key metrics
such as the number of individuals classified as overweight or obese and
the percentage prevalence.</p>
<p><br></p>
</div>
<div id="data-import-and-tidy" class="section level2">
<h2><strong>Data Import and Tidy</strong></h2>
<div id="part-1-major-datasets" class="section level3">
<h3><em>Part 1: Major Datasets</em></h3>
<p>Firstly, we processed both
<code>neighborhood- and borough-level</code> commuting data, focusing on
four commuting methods: bicycle, car/truck/van, public transportation,
and walking. These methods are represented in terms of both absolute
numbers and percentages. We clean the dataset by removing unnecessary
columns, renaming variables for clarity (e.g., <code>geography</code>
renamed to <code>neighborhood</code> and <code>borough</code>
accordingly based on analysis needs), and converting numeric data from
character format to ensure proper analysis.</p>
<p>Next, we pivot the data into a long format, enabling a flexible
structure for analysis and visualization by method and borough. The
dataset is sorted by <code>geo_id</code> for a consistent ordering of
boroughs. This preparation provides a clean and organized dataset that
supports further exploratory analysis of commuting patterns and their
relationships to sidewalk and obesity factors.</p>
<p>The final dataset <code>commuting_data</code> showed below.</p>
<pre class="r"><code>library(tidyverse)
library(janitor)
library(knitr)
library(kableExtra)

commuting_df = 
  read.csv(&quot;data/commuting.csv&quot;, na = c(&quot;NA&quot;,&quot;.&quot;,&quot;&quot;)) |&gt; 
   janitor::clean_names()

borough_df = 
  commuting_df  |&gt; 
  filter(geo_type_desc == &quot;Borough&quot;) |&gt; 
  select(-geo_type_desc) |&gt;  
  rename(borough = geography) |&gt;  
  mutate(across(
    c(bicycle_number, 
      car_truck_or_van_number, 
      public_transportation_number, 
      walked_number),
                ~as.numeric(gsub(&quot;,&quot;, &quot;&quot;, .))))

commuting_data = borough_df |&gt; 
  pivot_longer(
    cols = -c(time_period, geo_id, geo_rank, borough), 
    names_to = c(&quot;method&quot;, &quot;.value&quot;),
    names_pattern = &quot;(.*)_(number|percent)$&quot;
  ) |&gt; 
  select(-geo_rank) |&gt; 
  arrange(geo_id)

commuting_data |&gt; 
  knitr::kable(
    digits = 3, 
    caption = &quot;Commuting Data by Borough&quot;, 
    align = rep(&quot;l&quot;, ncol(commuting_data))  
  ) |&gt; 
  kableExtra::kable_styling(
    bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;),
    font_size = 12
  ) |&gt; 
  kableExtra::scroll_box(width = &quot;100%&quot;, height = &quot;300px&quot;)</code></pre>
<div
style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover table-condensed" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
Commuting Data by Borough
</caption>
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
time_period
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
geo_id
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
borough
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
method
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
number
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
percent
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:left;">
bicycle
</td>
<td style="text-align:left;">
2589
</td>
<td style="text-align:left;">
0.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:left;">
car_truck_or_van
</td>
<td style="text-align:left;">
164218
</td>
<td style="text-align:left;">
28.4
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:left;">
public_transportation
</td>
<td style="text-align:left;">
324274
</td>
<td style="text-align:left;">
56.1
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Bronx
</td>
<td style="text-align:left;">
walked
</td>
<td style="text-align:left;">
41772
</td>
<td style="text-align:left;">
7.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:left;">
bicycle
</td>
<td style="text-align:left;">
24134
</td>
<td style="text-align:left;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:left;">
car_truck_or_van
</td>
<td style="text-align:left;">
274494
</td>
<td style="text-align:left;">
22.3
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:left;">
public_transportation
</td>
<td style="text-align:left;">
663716
</td>
<td style="text-align:left;">
53.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Brooklyn
</td>
<td style="text-align:left;">
walked
</td>
<td style="text-align:left;">
104403
</td>
<td style="text-align:left;">
8.5
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:left;">
bicycle
</td>
<td style="text-align:left;">
20706
</td>
<td style="text-align:left;">
2.3
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:left;">
car_truck_or_van
</td>
<td style="text-align:left;">
67721
</td>
<td style="text-align:left;">
7.6
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:left;">
public_transportation
</td>
<td style="text-align:left;">
450560
</td>
<td style="text-align:left;">
50.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Manhattan
</td>
<td style="text-align:left;">
walked
</td>
<td style="text-align:left;">
167318
</td>
<td style="text-align:left;">
18.9
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:left;">
bicycle
</td>
<td style="text-align:left;">
7082
</td>
<td style="text-align:left;">
0.6
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:left;">
car_truck_or_van
</td>
<td style="text-align:left;">
437872
</td>
<td style="text-align:left;">
38.9
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:left;">
public_transportation
</td>
<td style="text-align:left;">
511929
</td>
<td style="text-align:left;">
45.5
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Queens
</td>
<td style="text-align:left;">
walked
</td>
<td style="text-align:left;">
64864
</td>
<td style="text-align:left;">
5.8
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:left;">
bicycle
</td>
<td style="text-align:left;">
408
</td>
<td style="text-align:left;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:left;">
car_truck_or_van
</td>
<td style="text-align:left;">
138342
</td>
<td style="text-align:left;">
63.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:left;">
public_transportation
</td>
<td style="text-align:left;">
57509
</td>
<td style="text-align:left;">
26.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2017-21
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
Staten Island
</td>
<td style="text-align:left;">
walked
</td>
<td style="text-align:left;">
6023
</td>
<td style="text-align:left;">
2.7
</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<p>We proceed to import our data using both read.csv() and read_csv()
from the readr package, specifying NA values to accurately handle
missing data right from the start. We then standardize column names to a
uniform format with janitor::clean_names() function, which simplifies
further coding and analysis. Moreover,we also transform the data by
converting numeric fields from string format to actual numbers, removing
commas for accurate calculations, and filtering the dataset to include
only borough-level data</p>
<p>Similarly, for overweight &amp; obesity dataset, we first create a
bar chart using ggplot2 to display obesity rates and corresponding
numbers for each NYC borough, enhancing clarity with direct textual
annotations on the bars. To make the chart interactive and allow dynamic
exploration, we employ plotly, transforming the static ggplot into an
interactive visualization. Additionally, we develop a trend line plot to
illustrate changes in obesity rates over the years across boroughs. This
line plot, also made interactive with plotly, includes tooltips that
provide detailed data insights when users hover over any point, thus
enabling a deeper understanding of obesity trends within each
borough.</p>
<p>The final dataset <code>obesity_data</code> showed below.</p>
<pre class="r"><code># Load and clean the data
library(janitor)
library(DT) 
overweight_overall_df &lt;- read_csv(&quot;data/overweightoverall.csv&quot;) %&gt;%
  clean_names() %&gt;%
  mutate(
    obesity_rate = as.numeric(sub(&quot;\\s*\\(.*$&quot;, &quot;&quot;, percent)),
    geo_type = tolower(geo_type)
  ) %&gt;%
  filter(geo_type == &quot;borough&quot;)

overweight_overall_df &lt;- overweight_overall_df %&gt;%
  rename(year = time_period)

datatable(
  overweight_overall_df %&gt;%
    select(year, geography, number, percent),
  options = list(
    pageLength = 10,
    autoWidth = TRUE,
    searchHighlight = TRUE,
    searchPanes = list(columns = c(1)),
    dom = &#39;Bfrtip&#39;,
    buttons = c(&#39;copy&#39;, &#39;csv&#39;, &#39;excel&#39;, &#39;pdf&#39;, &#39;print&#39;)
  ),
  extensions = &#39;Buttons&#39;,
  class = &#39;cell-border stripe&#39;
) %&gt;%
  formatStyle(
    columns = c(&#39;number&#39;, &#39;percent&#39;),
    valueColumns = &#39;number&#39;,
    backgroundColor = styleInterval(cuts = c(500000), values = c(&#39;white&#39;, &#39;#FFDDC1&#39;))
  )</code></pre>
<div class="datatables html-widget html-fill-item" id="htmlwidget-411972860ad8f7526456" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-411972860ad8f7526456">{"x":{"filter":"none","vertical":false,"extensions":["Buttons"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[2022,2022,2022,2022,2022,2021,2021,2021,2021,2021,2020,2020,2020,2020,2020,2019,2019,2019,2019,2019,2018,2018,2018,2018,2018,2017,2017,2017,2017,2017,2016,2016,2016,2016,2016,2015,2015,2015,2015,2015,2014,2014,2014,2014,2014,2013,2013,2013,2013,2013,2012,2012,2012,2012,2012,2011,2011,2011,2011,2011,2010,2010,2010,2010,2010,2009,2009,2009,2009,2009,2008,2008,2008,2008,2008,2007,2007,2007,2007,2007,2006,2006,2006,2006,2006,2005,2005,2005,2005,2005,2004,2004,2004,2004,2004,2003,2003,2003,2003,2003],["Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island","Bronx","Brooklyn","Manhattan","Queens","Staten Island"],["693,000","1,120,000","661,000","1,081,000","234,000","655,000","1,082,000","599,000","970,000","206,000","694,000","1,087,000","610,000","1,077,000","247,000","679,000","1,119,000","619,000","1,047,000","233,000","692,000","1,171,000","637,000","1,101,000","243,000","720,000","1,132,000","582,000","1,037,000","221,000","729,000","1,141,000","601,000","1,015,000","222,000","682,000","1,136,000","616,000","1,019,000","219,000","681,000","1,125,000","615,000","1,050,000","232,000","683,000","1,060,000","617,000","941,000","225,000","631,000","1,061,000","581,000","971,000","227,000","629,000","1,118,000","599,000","952,000","245,000","631,000","1,049,000","589,000","971,000","197,000","615,000","1,047,000","570,000","948,000","187,000","620,000","1,041,000","607,000","965,000","215,000","586,000","1,049,000","572,000","924,000","196,000","575,000","998,000","538,000","886,000","198,000","556,000","977,000","499,000","883,000","172,000","571,000","971,000","554,000","899,000","211,000","523,000","922,000","528,000","824,000","156,000"],["65.5 (61.7, 69.0)","54.6 (51.8, 57.4)","48.4 (44.7, 52.1)","57.4 (54.2, 60.6)","61.9 (54.9, 68.4)","63.9 (60.0, 67.6)","55.8 (53.1, 58.5)","44.8 (41.4, 48.2)","54.6 (51.5, 57.7)","56.7 (50.3, 62.9)","67.6 (63.9, 71.1)","55.8 (53.1, 58.5)","45.8 (42.4, 49.4)","60.9 (57.7, 63.9)","68.1 (61.5, 74.0)","66.2 (62.4, 69.9)","58.9 (56.0, 61.7)","47.6 (43.8, 51.5)","59.9 (56.6, 63.1)","64.7 (58.1, 70.7)","65.5 (62.1, 68.6)","59.9 (57.2, 62.5)","48.1 (44.7, 51.6)","60.4 (57.4, 63.3)","67.3 (60.3, 73.7)","69.3 (66.1, 72.4)","58.2 (55.9, 60.5)","44.4 (40.9, 48.0)","58.2 (55.4, 60.9)","61.4 (54.7, 67.8)","70.2 (67.2, 73.0)","59.0 (56.6, 61.4)","45.9 (42.4, 49.5)","56.6 (53.7, 59.4)","62.4 (56.1, 68.3)","66.5 (63.4, 69.4)","58.4 (55.9, 60.8)","47.3 (44.1, 50.5)","57.2 (54.5, 60.0)","61.3 (54.9, 67.4)","67.9 (64.2, 71.3)","58.7 (55.9, 61.5)","47.5 (44.3, 50.7)","59.6 (56.6, 62.5)","65.1 (59.8, 70.1)","68.9 (65.8, 71.9)","56.1 (53.2, 58.9)","47.8 (44.7, 50.9)","53.7 (50.7, 56.6)","64.2 (58.9, 69.2)","64.5 (60.5, 68.3)","56.8 (53.8, 59.8)","45.4 (41.8, 49.1)","55.9 (52.7, 59.1)","64.8 (58.9, 70.3)","66.3 (61.8, 70.6)","60.4 (56.8, 63.8)","47.1 (42.4, 51.8)","55.4 (51.8, 58.9)","70.3 (63.4, 76.4)","69.0 (65.5, 72.3)","59.7 (56.7, 62.6)","47.1 (42.9, 51.3)","57.0 (53.7, 60.3)","62.3 (56.2, 68.0)","67.5 (64.1, 70.8)","59.1 (56.4, 61.8)","45.5 (41.8, 49.2)","56.1 (53.1, 59.0)","57.4 (52.7, 61.9)","67.8 (64.0, 71.4)","58.8 (55.9, 61.6)","48.6 (45.2, 52.1)","56.6 (53.4, 59.8)","65.9 (60.5, 70.9)","65.2 (61.6, 68.6)","60.8 (58.6, 63.0)","47.2 (44.0, 50.4)","56.3 (53.5, 59.0)","61.2 (56.4, 65.7)","64.7 (61.3, 68.0)","59.0 (56.7, 61.2)","44.9 (41.9, 48.0)","54.9 (52.3, 57.4)","62.9 (58.3, 67.2)","64.1 (60.6, 67.5)","58.4 (56.2, 60.5)","41.5 (38.6, 44.5)","54.6 (52.1, 57.2)","55.6 (51.2, 59.8)","64.2 (60.8, 67.4)","56.9 (54.7, 59.1)","45.5 (42.6, 48.3)","55.3 (52.8, 57.7)","66.7 (61.9, 71.2)","62.9 (59.7, 66.1)","57.1 (54.9, 59.3)","45.1 (42.2, 47.9)","52.7 (50.2, 55.2)","53.1 (47.6, 58.5)"]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>geography<\/th>\n      <th>number<\/th>\n      <th>percent<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"searchHighlight":true,"searchPanes":{"columns":1},"dom":"Bfrtip","buttons":["copy","csv","excel","pdf","print"],"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"geography","targets":2},{"name":"number","targets":3},{"name":"percent","targets":4}],"order":[],"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 500000 ? \"white\" : \"#FFDDC1\"});\nvar value=data[3]; $(this.api().cell(row, 4).node()).css({'background-color':isNaN(parseFloat(value)) ? '' : value <= 500000 ? \"white\" : \"#FFDDC1\"});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p><br><br></p>
</div>
<div id="part-2-essential-variables-overview" class="section level3">
<h3><em>Part 2: Essential Variables Overview</em></h3>
<pre class="r"><code>library(tidyverse)

commuting_df = read.csv(&quot;data/commuting.csv&quot;, na = c(&quot;NA&quot;,&quot;.&quot;,&quot;&quot;)) |&gt; 
  janitor::clean_names() |&gt; 
  rename(geo_type = geo_type_desc) |&gt; 
  filter(
    geo_type %in% c(&quot;UHF 42&quot;, &quot;Citywide&quot;, &quot;Borough&quot;))

overweight_overall_df = read_csv(&quot;data/overweightoverall.csv&quot;, na = c(&quot;NA&quot;,&quot;.&quot;,&quot;&quot;)) |&gt; 
  janitor::clean_names() |&gt; 
  rename(
    obs_number = number,
    obs_percent = percent
  ) |&gt; 
  separate(
    obs_percent, 
    into = c(&quot;obs_percent&quot;, &quot;obs_percent_range&quot;), 
    sep = &quot;\\s*\\(\\s*&quot;, 
    convert = TRUE
  ) |&gt;
  mutate(obs_percent_range = str_remove(obs_percent_range, &quot;\\)$&quot;))

sidewalk_df = read_csv(&quot;data/sidewalk.csv&quot;, na = c(&quot;NA&quot;,&quot;.&quot;,&quot;&quot;)) |&gt; 
  janitor::clean_names() |&gt; 
  mutate(neighborhood_geo_id = paste(geography, geo_id, sep = &quot;, &quot;)) 

commuting_sidewalk_df = 
  inner_join(commuting_df, sidewalk_df, by = c(&quot;geo_id&quot;, &quot;geo_rank&quot;, &quot;geography&quot;)) |&gt; 
  dplyr::select(-time_period.x, -time_period.y, everything()) |&gt; 
  mutate(
    bicycle_info = paste0(bicycle_number, &quot; (&quot;, bicycle_percent, &quot;%)&quot;),
    car_truck_van_info = paste0(car_truck_or_van_number, &quot; (&quot;, car_truck_or_van_percent, &quot;%)&quot;),
    public_transport_info = paste0(public_transportation_number, &quot; (&quot;, public_transportation_percent, &quot;%)&quot;),
    walked_info = paste0(walked_number, &quot; (&quot;, walked_percent, &quot;%)&quot;)
  )</code></pre>
<p>To understand the association between obesity rates in different
areas, urban design (<code>Sidewalk Coverage</code>), and various
commuting methods, we included the following key variables in our
analysis:</p>
<p><strong>Major Outcome Variable (Dependent Variable)</strong>:</p>
<ul>
<li><a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/overweight/?id=2061#display=summary"><code>Obesity Rate</code></a>:
Estimated proportion of adults classified as overweight or obese,
calculated using self-reported weight and height.
<ul>
<li>Calculation (Number): Rounded to the nearest 1,000, adults with a
BMI between 25 and 29.9 are classified as overweight, and those with a
BMI of 30 or higher are classified as obese.</li>
<li>Calculation (Percent): Expressed as a percentage of the population,
using the same BMI thresholds.</li>
</ul></li>
</ul>
<pre class="r"><code># Calculate summary statistics for obesity percentage
obesity_table = overweight_overall_df |&gt; 
  summarize(
    overall_mean = mean(as.numeric(obs_percent), na.rm = TRUE),
    overall_std = sd(as.numeric(obs_percent), na.rm = TRUE),
    min_value = min(as.numeric(obs_percent), na.rm = TRUE),
    max_value = max(as.numeric(obs_percent), na.rm = TRUE)
  ) |&gt; 
  rename(
    &quot;Mean&quot; = overall_mean,
    &quot;Std Dev&quot; = overall_std,
    &quot;Min&quot; = min_value,
    &quot;Max&quot; = max_value
  )

# Define the table structure
obesity_table = tibble(
  measure1 = c(&quot;Mean&quot;, &quot;Std Dev&quot;),
  value1 = c(57.43, 9.47),
  measure2 = c(&quot;Min&quot;, &quot;Max&quot;),
  value2 = c(30.1, 78.7)
)

obesity_table |&gt; 
  knitr::kable(
    caption = &quot;Summary Statistics for Obesity Rate&quot;,
    col.names = NULL,
    align = &quot;c&quot;,
    digits = 2
  )</code></pre>
<table>
<caption>Summary Statistics for Obesity Rate</caption>
<tbody>
<tr class="odd">
<td align="center">Mean</td>
<td align="center">57.43</td>
<td align="center">Min</td>
<td align="center">30.1</td>
</tr>
<tr class="even">
<td align="center">Std Dev</td>
<td align="center">9.47</td>
<td align="center">Max</td>
<td align="center">78.7</td>
</tr>
</tbody>
</table>
<hr style="height: 5px; border: none; background: linear-gradient(to right, #FFDDC1, white);">
<p><strong>Explanatory Variables (Independent Variables)</strong>:</p>
<ul>
<li><a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/active-design/?id=2181#display=summary"><code>Sidewalk Area</code></a>:
calculated as the total curb-to-building sidewalk area (in square
kilometers) within the UHF neighborhood divided by the total land area
(excluding inland water bodies), expressed as a
<code>percentage</code>.</li>
</ul>
<pre class="r"><code># Calculate summary statistics for sidewalk area percentage
sidewalk_table = sidewalk_df |&gt; 
  summarize(
    overall_mean = mean(percent_of_land_area, na.rm = TRUE),
    overall_std = sd(percent_of_land_area, na.rm = TRUE),
    min_value = min(percent_of_land_area, na.rm = TRUE),
    max_value = max(percent_of_land_area, na.rm = TRUE)
  ) |&gt; 
  rename(
    &quot;Mean&quot; = overall_mean,
    &quot;Std Dev&quot; = overall_std,
    &quot;Min&quot; = min_value,
    &quot;Max&quot; = max_value
  )


# Define the table structure
sidewalk_table = tibble(
  measure1 = c(&quot;Mean&quot;, &quot;Std Dev&quot;),
  value1 = c(7.59, 2.34),
  measure2 = c(&quot;Min&quot;, &quot;Max&quot;),
  value2 = c(2.7, 11.3)
)

sidewalk_table |&gt; 
  knitr::kable(
    caption = &quot;Summary Statistics for Sidewalk Area&quot;,
    col.names = NULL,
    align = &quot;c&quot;,
    digits = 2
  )</code></pre>
<table>
<caption>Summary Statistics for Sidewalk Area</caption>
<tbody>
<tr class="odd">
<td align="center">Mean</td>
<td align="center">7.59</td>
<td align="center">Min</td>
<td align="center">2.7</td>
</tr>
<tr class="even">
<td align="center">Std Dev</td>
<td align="center">2.34</td>
<td align="center">Max</td>
<td align="center">11.3</td>
</tr>
</tbody>
</table>
<ul>
<li><a
href="https://a816-dohbesp.nyc.gov/IndicatorPublic/data-explorer/walking-driving-and-cycling/?id=2415#display=summary"><code>Commuting Methods</code></a>:As
part of our group project, we are analyzing how adults commute to work,
categorized by modeâ€”public transit, biking, walking, or private
vehicles. These commuting patterns help us better understand
transportation availability, individual choices, traffic conditions, and
safety concerns. The dataset we are using includes information on the
following commuting methods:
<ul>
<li><code>Bicycle</code>:
<ul>
<li>Number: Estimated workers (16+ years) who commute by bicycle.</li>
<li>Percentage: Proportion of commuters using bicycles.</li>
</ul></li>
<li><code>Car, Truck, or Van</code>:
<ul>
<li>Number: Estimated workers (16+ years) commuting via car, truck, or
van (driver or passenger).</li>
<li>Percentage: Proportion of commuters using cars, trucks, or
vans.</li>
</ul></li>
<li><code>Public Transportation</code>:
<ul>
<li>Number: Estimated workers (16+ years) using public transit.</li>
<li>Percentage: Proportion of commuters using public transit.</li>
</ul></li>
<li><code>Walking</code>:
<ul>
<li>Number: Estimated workers (16+ years) walking to work.</li>
<li>Percentage: Proportion of commuters walking to work.</li>
</ul></li>
</ul></li>
</ul>
<pre class="r"><code># Calculate summary statistics for commuting percentages
commuting_table &lt;- commuting_df %&gt;%
  summarize(
    bike_mean = mean(bicycle_percent, na.rm = TRUE),
    bike_std = sd(bicycle_percent, na.rm = TRUE),
    bike_min = min(bicycle_percent, na.rm = TRUE),
    bike_max = max(bicycle_percent, na.rm = TRUE),
    car_mean = mean(car_truck_or_van_percent, na.rm = TRUE),
    car_std = sd(car_truck_or_van_percent, na.rm = TRUE),
    car_min = min(car_truck_or_van_percent, na.rm = TRUE),
    car_max = max(car_truck_or_van_percent, na.rm = TRUE),
    walk_mean = mean(walked_percent, na.rm = TRUE),
    walk_std = sd(walked_percent, na.rm = TRUE),
    walk_min = min(walked_percent, na.rm = TRUE),
    walk_max = max(walked_percent, na.rm = TRUE),
    public_mean = mean(public_transportation_percent, na.rm = TRUE),
    public_std = sd(public_transportation_percent, na.rm = TRUE),
    public_min = min(public_transportation_percent, na.rm = TRUE),
    public_max = max(public_transportation_percent, na.rm = TRUE)
  ) %&gt;%
  pivot_longer(cols = everything(), names_to = &quot;Variable&quot;, values_to = &quot;Value&quot;) %&gt;%
  separate(Variable, into = c(&quot;Method&quot;, &quot;Stat&quot;), sep = &quot;_&quot;) %&gt;%
  pivot_wider(names_from = &quot;Stat&quot;, values_from = &quot;Value&quot;)

commuting_table |&gt; 
    knitr::kable(
    caption = &quot;Summary Statistics for Commuting Methods&quot;,
    digits = 2
  )</code></pre>
<table>
<caption>Summary Statistics for Commuting Methods</caption>
<thead>
<tr class="header">
<th align="left">Method</th>
<th align="right">mean</th>
<th align="right">std</th>
<th align="right">min</th>
<th align="right">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">bike</td>
<td align="right">1.28</td>
<td align="right">1.23</td>
<td align="right">0.1</td>
<td align="right">5.1</td>
</tr>
<tr class="even">
<td align="left">car</td>
<td align="right">28.86</td>
<td align="right">19.13</td>
<td align="right">4.9</td>
<td align="right">68.7</td>
</tr>
<tr class="odd">
<td align="left">walk</td>
<td align="right">9.58</td>
<td align="right">7.09</td>
<td align="right">1.4</td>
<td align="right">35.0</td>
</tr>
<tr class="even">
<td align="left">public</td>
<td align="right">47.75</td>
<td align="right">12.44</td>
<td align="right">21.7</td>
<td align="right">67.5</td>
</tr>
</tbody>
</table>
<hr style="height: 5px; border: none; background: linear-gradient(to right, #FFDDC1, white);">
<p><strong>Geographical Variables (refer to Part 1)</strong>:</p>
<ul>
<li><p><code>Neighborhood-Level Data</code>: Data aggregated at a
smaller, localized area.</p></li>
<li><p><code>Borough-Level Data</code>: Data aggregated at a larger,
regional area.</p></li>
</ul>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
